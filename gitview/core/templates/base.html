{% load staticfiles %}
{% load compressed %}

<!doctype html>
<html ng-app="gitView">
    <head>
        <title>
            {% block title %}{% endblock %}
            {{ gitview.name }}
        </title>

        {% compressed_css "bootstrap" %}
        {% compressed_css "repositories" %}

        <style type="text/css">
            .navbar-btn { margin-right: 8px; }
            label { display: block; }
            input[type=text],
            input[type=password] { display: block; width: 100%; }
            .form-control { margin-bottom: 15px; }
            .form-error-list { margin-bottom: 5px; padding: 10px; }
            .form-error-list ul { list-style: none; margin: 0; padding: 0; }
        </style>

        {% block css %}{% endblock %}
    </head>
    <body>
        {% compressed_js "jquery" %}
        {% compressed_js "core" %}
        {% compressed_js "auth" %}

        <script type="text/javascript">
            $(".js-relative-time").timeago();
        </script>

        {% verbatim %}
        <script type="text/x-handlebars" data-template-name="repository">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="repository-breadcrumb">
                            {{#if is_public}}
                            <span class="repository-status public">
                                <span class="repository-label">
                                    public
                                </span>
                                <i class="icon-globe"></i>
                            </span>
                            {{else}}
                            <span class="repository-status private">
                                <span class="repository-label">
                                    private
                                </span>
                                <i class="icon-lock"></i>
                            </span>
                            {{/if}}
                            {{#link-to "profile" owner class="repository-breadcrumb-owner"}}
                                {{ ownerName }}
                            {{/link-to}}
                            <span class="repository-breadcrumb-divider">
                                /
                            </span>
                            {{#link-to "repository" owner model class="repository-breadcrumb-name"}}
                                {{ name }}
                            {{/link-to}}
                        </h1>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <ul class="nav nav-tabs nav-justified repository-nav">
                            {{#link-to "repository" owner model tagName="li"}}
                            <a {{bindAttr href="view.href"}}>
                                <i class="icon-code"></i>
                                Files
                            </a>
                            {{/link-to}}
                            {{#link-to "repository.commits" owner model tagName="li"}}
                            <a {{bindAttr href="view.href"}}>
                                Commits
                            </a>
                            {{/link-to}}
                            {{#if has_issues}}
                            {{#link-to "repository.issues" owner model tagName="li"}}
                            <a {{bindAttr href="view.href"}}>
                                Issues
                            </a>
                            {{/link-to}}
                            {{/if}}
                            {{#link-to "repository.settings" owner model tagName="li"}}
                            <a {{bindAttr href="view.href"}}>
                                <i class="icon-cogs"></i>
                                Settings
                            </a>
                            {{/link-to}}
                        </ul>
                    </div>
                </div>

                {{ outlet content }}

            </div>
        </script>
        {% endverbatim %}

        <script type="text/javascript">
            GitView.User = {};

            {% if user.is_active %}
            GitView.User.loggedIn = true;
            {% else %}
            GitView.User.loggedIn = false;
            {% endif %}
        </script>

        {% block js %}{% endblock %}
    </body>
</html>
